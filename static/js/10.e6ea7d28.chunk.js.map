{"version":3,"sources":["components/SearchForm/SearchForm.styles.jsx","components/SearchForm/SearchForm.jsx","pages/SearchMoviesPage.jsx"],"names":["Form","Input","Button","SearchForm","onSearch","onSubmit","e","preventDefault","target","elements","searchQuery","value","trim","toLowerCase","toast","info","type","name","id","placeholder","autoComplete","SearchMoviesPage","useState","movies","setMovies","status","setStatus","history","useHistory","location","useLocation","currentPage","Number","URLSearchParams","search","get","totalPages","setTotalPages","useEffect","a","getSearchMovies","data","results","total_pages","length","Error","console","log","warning","getMovies","handleChangeQuery","query","push","Loader","MovieList","Pagination","onClick","selected","window","scrollTo","top","behavior"],"mappings":"mSAEO,IAAMA,EAAI,iKASJC,EAAK,olBA8BLC,EAAM,ub,eCJJC,EA/BI,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SAWpB,OACE,eAACJ,EAAD,CAAMK,SAXa,SAACC,GACpBA,EAAEC,iBACiD,KAA/CD,EAAEE,OAAOC,SAASC,YAAYC,MAAMC,QAIxCR,EAASE,EAAEE,OAAOC,SAASC,YAAYC,MAAME,cAAcD,QAC3DN,EAAEE,OAAOC,SAASC,YAAYC,MAAQ,IAJtCG,IAAMC,KAAK,yBAQX,UACE,cAACd,EAAD,CACEe,KAAK,OACLC,KAAK,cACLC,GAAG,cACHC,YAAY,gBACZC,aAAa,QAEf,cAAClB,EAAD,CAAQc,KAAK,SAAb,SACI,cAAC,IAAD,U,QCjBK,SAASK,IACpB,MAA4BC,mBAAS,IAArC,mBAAOC,EAAP,KAAeC,EAAf,KACA,EAA4BF,mBAAS,QAArC,mBAAOG,EAAP,KAAeC,EAAf,KACMC,EAAUC,cACVC,EAAWC,cACXC,EAAcC,OAAO,IAAIC,gBAAgBJ,EAASK,QAAQC,IAAI,UAAY,EAC1EzB,EAAc,IAAIuB,gBAAgBJ,EAASK,QAAQC,IAAI,SAC7D,EAAoCb,mBAAS,MAA7C,mBAAOc,EAAP,KAAmBC,EAAnB,KAEAC,qBAAU,WAAM,4CAIZ,gCAAAC,EAAA,6DACIb,EAAU,WADd,kBAGuBc,YAAgB9B,EAAaqB,GAHpD,UAGUU,EAHV,OAIYC,EAAyBD,EAAzBC,QAASC,EAAgBF,EAAhBE,YACZD,EAAQE,OALjB,sBAMQ,IAAIC,MAAM,qBANlB,OAQIrB,EAAUkB,GACVL,EAAcM,GACdjB,EAAU,YAVd,kDAaIoB,QAAQC,IAAR,MACAjC,IAAMkC,QAAQ,qBACdtB,EAAU,YAfd,2DAJY,sBACPhB,GADO,mCAsBhBuC,KACG,CAACvC,EAAaqB,IAEjB,IAAMmB,EAAoB,SAAAC,GACrBA,GAASA,IAAUzC,GAIxBc,EAAU,IACVG,EAAQyB,KAAR,2BACGvB,GADH,IAEAK,OAAO,SAAD,OAAWiB,EAAX,SAAyB,OANvBrC,IAAMC,KAAK,6BAkBnB,MAAe,SAAXU,EAEI,cAAC,EAAD,CAAYrB,SAAU8C,IAGf,YAAXzB,EAEI,qCACA,cAAC,EAAD,CAAYrB,SAAU8C,IACtB,cAACG,EAAA,EAAD,OAIO,aAAX5B,EAEI,qCACA,cAAC,EAAD,CAAYrB,SAAU8C,IACrB3B,GAAU,cAAC+B,EAAA,EAAD,CAAW/B,OAAQA,IAC9B,cAACgC,EAAA,EAAD,CACAnB,WAAYA,EACZoB,QA5BgB,SAAC,GAAgB,IAAfC,EAAc,EAAdA,SACzB9B,EAAQyB,KAAR,2BACIvB,GADJ,IAECK,OAAO,SAAD,OAAWxB,EAAX,iBAA+B+C,EAAW,MAElDC,OAAOC,SAAS,CAAEC,IAAK,EAAGC,SAAU,YAwB5B9B,YAAaA,OAIN,aAAXN,EAEI,cAAC,EAAD,CAAYrB,SAAU8C,SAF9B","file":"static/js/10.e6ea7d28.chunk.js","sourcesContent":["import styled from \"@emotion/styled/macro\";\n\nexport const Form = styled.form`\n  position: relative;\n  display: flex;\n  margin: 0 auto;\n  width: 400px;\n  margin-bottom: 40px;\n  text-align: center;\n`;\n\nexport const Input = styled.input`\n  width: 100%;\n  height: 40px;\n  padding-left: 20px;\n  border: none;\n  outline: none;\n  border-radius: 0 20px 20px 20px;\n  font-weight: 400;\n  font-size: 20px;\n  line-height: 1.14;\n  color: var(--color-dark);\n  box-shadow: -5px -5px 5px 0 #ffffff70, 5px 5px 5px 0 #aeaec050;\n  background-color: #f0f0f3;\n  transition: border-color 250ms ease-in-out;\n  &::placeholder {\n    font-size: 16px;\n    font-weight: 500;\n    color: var(--color-accent);\n    opacity: 1;\n  }\n  &:focus {\n    box-shadow: inset -5px -5px 5px 0 #ffffff70, inset 5px 5px 5px 0 #aeaec050;\n    &::placeholder {\n      opacity: 1;\n      transition-delay: 250ms;\n      color: #2c2c2caa;\n    }\n  }\n`;\n\nexport const Button = styled.button`\nposition: absolute;\nbottom: 0;\nright: 0;\ndisplay: flex;\nalign-items: center;\npadding: 5px 10px 5px 0;\nopacity: 0;\npointer-events: none;\nborder: none;\nfont-size: 30px;\nfont-weight: 500;\ncolor: var(--color-dark);\nbackground-color: transparent;\n&:hover {\n color: var(--color-accent);\n}\n   Input:focus ~ & {\n     opacity: 1;\n     pointer-events: all;\n     transform: translateX(0);\n   }\n   & svg {\n     margin-left: 10px;\n     color: var(--color-accent);\n   }\n`;","import PropTypes from \"prop-types\";\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { Form, Input,  Button } from \"./SearchForm.styles\";\n import { GiPopcorn } from \"react-icons/gi\";\n\nconst SearchForm = ({ onSearch }) => {\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (e.target.elements.searchQuery.value.trim() === \"\") {\n    toast.info('Please, enter query!');\n      return\n    }\n    onSearch(e.target.elements.searchQuery.value.toLowerCase().trim());\n    e.target.elements.searchQuery.value = \"\";\n  };\n\n  return (\n    <Form onSubmit={handleSubmit}>\n      <Input\n        type=\"text\"\n        name=\"searchQuery\"\n        id=\"movieSearch\"\n        placeholder=\"Search movies\"\n        autoComplete=\"off\"\n      />\n      <Button type=\"submit\" >\n          <GiPopcorn />\n      </Button>\n    </Form>\n  );\n};\n\nSearchForm.propTypes = {\n  onSearch: PropTypes.func.isRequired,\n};\n\nexport default SearchForm;","import { useEffect, useState } from \"react\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { getSearchMovies } from \"../services/api\";\nimport Loader from \"../components/Loader/Loader\";\nimport Pagination from \"../components/Pagination/Pagination\";\nimport SearchForm from \"../components/SearchForm/SearchForm\";\nimport {MovieList} from \"../components/MovieList/MovieList\";\n\nexport default function SearchMoviesPage() {\n    const [movies, setMovies] = useState([]);\n    const [status, setStatus] = useState(\"idle\");\n    const history = useHistory();\n    const location = useLocation();\n    const currentPage = Number(new URLSearchParams(location.search).get(\"page\")) || 1;\n    const searchQuery = new URLSearchParams(location.search).get(\"query\");\n    const [totalPages, setTotalPages] = useState(null);\n\n    useEffect(() => {\n        if (!searchQuery) { \n        return\n    }\n        async function getMovies() {\n            setStatus(\"pending\");\n        try {\n            const data = await getSearchMovies(searchQuery, currentPage);\n            const { results, total_pages } = data;\n            if (!results.length) {\n          throw new Error(\"Results not found\");\n        }\n            setMovies(results);\n            setTotalPages(total_pages);\n            setStatus(\"resolved\");\n        }\n        catch (error) {\n            console.log(error);\n            toast.warning(\"Results not found\");\n            setStatus(\"rejected\");\n      }\n    }\n    getMovies();\n    }, [searchQuery, currentPage])\n\n    const handleChangeQuery = query => {\n    if (!query || query === searchQuery) {\n            toast.info('Please, enter new query!');\n        return;\n    }\n    setMovies([]);\n    history.push({\n    ...location,\n    search: `query=${query}&page=${1}`,\n    });\n    }\n    \n    const handlePageClick = ({selected}) => {\n     history.push({\n      ...location,\n      search: `query=${searchQuery}&page=${selected + 1}`,\n     })\n    window.scrollTo({ top: 0, behavior: \"smooth\" });\n    }\n\n    if (status === \"idle\") {\n        return (\n            <SearchForm onSearch={handleChangeQuery} />\n        )\n    }\n    if (status === \"pending\") {\n        return (\n            <>\n            <SearchForm onSearch={handleChangeQuery} />\n            <Loader />\n            </>\n        )\n    }\n    if (status === \"resolved\") {\n        return (\n            <>\n            <SearchForm onSearch={handleChangeQuery} />\n            {movies && <MovieList movies={movies} />}\n            <Pagination\n            totalPages={totalPages}\n            onClick={handlePageClick}\n            currentPage={currentPage} />\n            </>\n        )\n    }\n    if (status === \"rejected\") {\n        return (\n            <SearchForm onSearch={handleChangeQuery} />\n        )\n    }\n}"],"sourceRoot":""}